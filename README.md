# Dremio Agent Skill

This repository contains a specialized "Agent Skill" for Dremio. It teaches AI coding assistants (like Cursor, Claude Code, or Antigravity) how to interact with Dremio's Data Lakehouse platform.

## What's Included?

The skill is located in the `dremio-skill/` directory and includes:

-   **`SKILL.md`**: The main entry point defining the skill's capabilities.
-   **`knowledge/`**: Comprehensive documentation for:
    -   **Dremio CLI**: Command-line administration.
    -   **Python SDK (`dremioframe`)**: Scripting and automation.
    -   **SQL**: Query syntax, Iceberg DML, and metadata functions.
    -   **REST API**: Low-level API endpoints.
-   **`rules/`**: Configuration files like `.cursorrules` to load this context into your AI session.

## How to Use

### Option 1: Copy to Your Project (Recommended)

1.  Copy the `dremio-skill/` folder into the root of your project.
2.  If you use **Cursor**, copy the content of `dremio-skill/rules/.cursorrules` into your project's `.cursorrules` file.
3.  Start asking Dremio-related questions!

### Option 2: Clone and Use as Workspace

1.  Clone this repository.
2.  Write your scripts or queries in the root directory.
3.  The structure is already set up for AI tools to discover the skill in `dremio-skill/`.

## üîê Credentials & Configuration

To effectively use this skill, you must securely configure your Dremio credentials. **Never paste secrets directly into your prompt.**

### 1. Python (`dremioframe`)
DremioFrame scripts generated by the AI will expect credentials in environment variables or a `.env` file.

1.  Create a `.env` file in your project root:
    ```bash
    # --- Dremio Cloud ---
    DREMIO_ENDPOINT="https://api.dremio.cloud"
    DREMIO_PAT="your-personal-access-token"
    DREMIO_PROJECT_ID="your-project-id" # Required for Cloud

    # --- Dremio Software (v26+ with PAT) ---
    DREMIO_SOFTWARE_HOST="https://dremio.company.com"
    DREMIO_SOFTWARE_PAT="your-software-pat"
    DREMIO_SOFTWARE_TLS="true"

    # --- Dremio Software (Legecy User/Pass) ---
    # DREMIO_SOFTWARE_USER="admin"
    # DREMIO_SOFTWARE_PASSWORD="secret-password"
    ```
2.  The AI knows to use `os.getenv()` to retrieve these values securely.

### 2. Dremio CLI
The CLI credential management is handled via profiles stored in `~/.dremio/profiles`.

Run the following command in your terminal to create a profile (do this *before* asking the AI to run CLI commands):

```bash
# For Dremio Cloud
dremio profile create --name cloud-profile \
  --base-url https://api.dremio.cloud \
  --token "your-pat" \
  --project-id "your-project-id"

# For Dremio Software (v26+ with PAT is recommended)
dremio profile create --name software-profile \
  --base-url https://dremio.company.com \
  --token "your-software-pat"
```

Once configured, the AI can simply use `dremio --profile cloud-profile ...` in its commands.

## üõ†Ô∏è Tool Compatibility

This skill is designed for **Agentic Coding Tools** that support the `SKILL.md` standard or context loading via `.cursorrules`.

-   **Google Antigravity**: Fully supported. Discoverable via `SKILL.md`.
-   **Claude Code**: Supported in latest versions via `dremio-skill/SKILL.md` or `.clauderc`.
-   **Cursor / VS Code**: Supported by copying `dremio-skill/rules/.cursorrules` to your project root.
-   **Other Agents**: Any agent that can read Markdown documentation in the `dremio-skill/knowledge` folder.

## üó£Ô∏è Example Prompts

Try these prompts to leverage the full power of the Dremio Skill:

### üêç Python Automation (DremioFrame)
-   "Write a Python script to list all sources and their metadata policies."
-   "Create a script to clone a space 'Marketing' into a new space 'Marketing_Backup'."
-   "Write a script that uses the Dremio Lineage API to find all tables downstream of 'Sales.Transactions'."
-   "Generate a script to create 50 users from a CSV file using the Admin API."

### üíª CLI Operations
-   "Give me the CLI command to export the entire 'Finance' space to a JSON file."
-   "How do I use the CLI to promote a folder to a physical dataset?"
-   "Write a bash script using `dremio-cli` to refresh all reflections in the 'Datalake' source."

### üìä SQL & Analysis
-   "Write a Dremio SQL query to optimize the 'Sales.Events' Iceberg table."
-   "How do I query the Iceberg metadata to see how many snapshots the table 'Logs' has?"
-   "Write a query to PIVOT the 'MonthlySales' table so that months become columns."

## ‚ùì Troubleshooting

### The AI doesn't know about Dremio
-   **Check Context**: Ensure the `dremio-skill` folder is in your project root.
-   **Cursor Users**: Verify `.cursorrules` exists in the root and you are in "Agent" or "Composer" mode (not just "Chat").
-   **Antigravity**: Ensure you are in a session where the skill has been loaded/indexed.

### Authentication Errors in Scripts
-   **Check `.env`**: Make sure your `.env` file exists and has the correct variable names (`DREMIO_PAT`, `DREMIO_ENDPOINT`, etc.).
-   **Load `.env`**: Ensure the generated Python script includes `from dotenv import load_dotenv; load_dotenv()`. Remind the AI to include this if it forgets.
-   **Software vs Cloud**: Double-check you aren't using a Cloud endpoint with Software credentials or vice-versa.

### "Command Not Found" (CLI)
-   **Install CLI**: Did you run `pip install dremio-cli`?
-   **Profile**: Did you create a profile using `dremio profile create`? The AI usually assumes a profile exists.
